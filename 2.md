# #2
25.9.2017

---

pvs - Display information about physical volumes

vgs - Display information about volume groups

lvs - Display information about logical volumes

lsblk - list block devices


Delete loop:
losetup -d loopdev...

Delete all used loop devices:
losetup -D

---

## exercise #1

1. Create a loopback device with 100MiB

```sh
# preallocate space to a file
fallocate -l 100M filename

# use this device as loop device
losetup -f filename

# show status of all loop devices
losetup -a
```

2. Create GPT on that device with 5 small partitions
```sh
$
```

3. Copy MBR partition table (\*)
	> partitions 1,3,5 from GPT version should be visible
    > MBR/GPT have to be supported mostly on dual/triple boot systems - it is not a preferred setup

```sh
$
```

### exercise #2

1. Create a physical volume on loopback device
```sh
pvcreate /dev/loop0 physicalvol0 
```
2. Create a filesystem which fill 100% of LV
```sh
$
```
3. Do not unmount filesystem in next steps
```sh
$
```
4. Create new physical volume
```sh
$
```
5. Extend volume group to use also this free space
```sh
$
```
6. Remove the first loopback device from systems
```sh
$
```

### exercise #3
1. Create 200MB thin pool
```sh
lvcreate
```
2. How large filesystem it can handle?
```sh
$
```
3. Remove all thin volumes
```sh
$
```
4. Create 2x thin volumes per 100MB
```sh
$
```
5. Create a snapshot of thin volume
```sh
$
```
6. Create a snapshot of the snapshot
```sh
$
```
7. Merge snapshot of snapshot to original thin volume
```sh
$
```
